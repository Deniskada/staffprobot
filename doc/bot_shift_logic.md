# –õ–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω –≤ –±–æ—Ç–µ StaffProBot

## –û–±–∑–æ—Ä

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ª–æ–≥–∏–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω –≤ Telegram-–±–æ—Ç–µ StaffProBot. –õ–æ–≥–∏–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ —Å–º–µ–Ω: **–ø–ª–∞–Ω–æ–≤—ã–µ** (–∑–∞—Ä–∞–Ω–µ–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) –∏ **—Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã–µ** (–≤–Ω–µ–ø–ª–∞–Ω–æ–≤—ã–µ).

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–õ–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö:
- `apps/bot/handlers_div/shift_handlers.py` - –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- `apps/bot/handlers_div/core_handlers.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏
- `apps/bot/services/shift_service.py` - —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω–∏—è —Å–º–µ–Ω
- `apps/bot/services/shift_schedule_service.py` - —Å–µ—Ä–≤–∏—Å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω
- `apps/bot/services/timeslot_service.py` - —Å–µ—Ä–≤–∏—Å —Ç–∞–π–º-—Å–ª–æ—Ç–æ–≤

## –ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 1. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã (`_handle_open_shift`)

**–¢—Ä–∏–≥–≥–µ—Ä:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "üîÑ –û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É"

**–õ–æ–≥–∏–∫–∞:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–º–µ–Ω (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–º–µ–Ω)
3. **–ü–æ–∏—Å–∫ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:**
   - –í—ã–∑–æ–≤ `ShiftScheduleService.get_user_planned_shifts_for_date(user_id, today)`
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "planned" –∏–ª–∏ "confirmed"

**–í–µ—Ç–≤–ª–µ–Ω–∏–µ:**
- **–ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–º–µ–Ω—ã:** –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±–æ—Ä—É –ø–ª–∞–Ω–æ–≤–æ–π —Å–º–µ–Ω—ã
- **–ï—Å–ª–∏ –ù–ï–¢ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω:** –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±–æ—Ä—É –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ–π —Å–º–µ–Ω—ã

### 2. –í—ã–±–æ—Ä –ø–ª–∞–Ω–æ–≤–æ–π —Å–º–µ–Ω—ã

**–¢—Ä–∏–≥–≥–µ—Ä:** –ï—Å—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–º–µ–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è

**–õ–æ–≥–∏–∫–∞:**
1. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - `action`: `UserAction.OPEN_SHIFT`
   - `step`: `UserStep.SHIFT_SELECTION`
2. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω —Å –∫–Ω–æ–ø–∫–∞–º–∏:
   - –§–æ—Ä–º–∞—Ç: `üìÖ {object_name} {start_time}-{end_time}`
   - `callback_data`: `open_planned_shift:{schedule_id}`
3. ‚úÖ –ö–Ω–æ–ø–∫–∞ "‚ùå –û—Ç–º–µ–Ω–∞" ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

### 3. –í—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ–π —Å–º–µ–Ω—ã

**–¢—Ä–∏–≥–≥–µ—Ä:** –ù–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω –Ω–∞ —Å–µ–≥–æ–¥–Ω—è

**–õ–æ–≥–∏–∫–∞:**
1. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:
   - –í—ã–∑–æ–≤ `EmployeeObjectsService.get_employee_objects(user_id)`
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–∫—Ç–∏–≤–Ω—ã–º –¥–æ–≥–æ–≤–æ—Ä–∞–º
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - `action`: `UserAction.OPEN_SHIFT`
   - `step`: `UserStep.OBJECT_SELECTION`
   - `shift_type`: "spontaneous"
3. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏:
   - –§–æ—Ä–º–∞—Ç: `üè¢ {object_name} ({contracts_count} –¥–æ–≥–æ–≤–æ—Ä)`
   - `callback_data`: `open_shift_object:{object_id}`

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–ª–∞–Ω–æ–≤–æ–π —Å–º–µ–Ω—ã (`_handle_open_planned_shift`)

**–¢—Ä–∏–≥–≥–µ—Ä:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–ª–∞–Ω–æ–≤—É—é —Å–º–µ–Ω—É

**–õ–æ–≥–∏–∫–∞:**
1. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–º–µ–Ω—ã:
   - –í—ã–∑–æ–≤ `ShiftScheduleService.get_shift_schedule_by_id(schedule_id)`
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - `selected_object_id`: ID –æ–±—ä–µ–∫—Ç–∞ —Å–º–µ–Ω—ã
   - `step`: `UserStep.LOCATION_REQUEST`
   - `shift_type`: "planned"
   - `selected_timeslot_id`: ID —Ç–∞–π–º-—Å–ª–æ—Ç–∞
   - `selected_schedule_id`: ID –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–º–µ–Ω—ã
3. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–º–µ–Ω–µ:
   - –û–±—ä–µ–∫—Ç, –¥–∞—Ç–∞, –≤—Ä–µ–º—è
4. ‚úÖ –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ —Å –∫–Ω–æ–ø–∫–æ–π "üìç –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é"

### 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ (`_handle_open_shift_object_selection`)

**–¢—Ä–∏–≥–≥–µ—Ä:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –æ–±—ä–µ–∫—Ç –¥–ª—è —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ–π —Å–º–µ–Ω—ã

**–õ–æ–≥–∏–∫–∞:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—ä–µ–∫—Ç—É:
   - –í—ã–∑–æ–≤ `EmployeeObjectsService.has_access_to_object(user_id, object_id)`
2. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞:
   - –í—ã–∑–æ–≤ `EmployeeObjectsService.get_employee_object_by_id(user_id, object_id)`
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Ç–∞–π–º-—Å–ª–æ—Ç–æ–≤:
   - –í—ã–∑–æ–≤ `TimeSlotService.get_available_timeslots_for_object(object_id, today)`
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–∞—Å–æ–≤–æ–π —Å—Ç–∞–≤–∫–∏ –∏–∑ —Ç–∞–π–º-—Å–ª–æ—Ç–∞ –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞
4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - `selected_object_id`: ID –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
   - `step`: `UserStep.LOCATION_REQUEST`
   - `shift_type`: "spontaneous"
5. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–±—ä–µ–∫—Ç–µ:
   - –ù–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞–≤–∫–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∞–π–º-—Å–ª–æ—Ç–æ–≤
6. ‚úÖ –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ —Å –∫–Ω–æ–ø–∫–æ–π "üìç –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é"

### 6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ (`handle_location`)

**–¢—Ä–∏–≥–≥–µ—Ä:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é

**–õ–æ–≥–∏–∫–∞:**
1. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç: `f"{location.latitude},{location.longitude}"`
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è: `step = UserStep.PROCESSING`
3. **–í—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–º–µ–Ω—ã:**
   ```python
   result = await shift_service.open_shift(
       user_id=user_id,
       object_id=user_state.selected_object_id,
       coordinates=coordinates,
       shift_type=shift_type,  # "planned" –∏–ª–∏ "spontaneous"
       timeslot_id=timeslot_id,  # –¥–ª—è –ø–ª–∞–Ω–æ–≤—ã—Ö —Å–º–µ–Ω
       schedule_id=schedule_id   # –¥–ª—è –ø–ª–∞–Ω–æ–≤—ã—Ö —Å–º–µ–Ω
   )
   ```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
- **–£—Å–ø–µ—Ö:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å–º–µ–Ω–µ
- **–û—à–∏–±–∫–∞:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏ –∏–ª–∏ –æ—Ç–º–µ–Ω—ã

### 7. –°–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ–Ω—ã (`ShiftService.open_shift`)

**–õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è:**
1. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞
   - –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `telegram_id`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–º–µ–Ω
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –æ–±—ä–µ–∫—Ç–∞)

2. ‚úÖ **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–∞—Å–æ–≤–æ–π —Å—Ç–∞–≤–∫–∏:**
   - **–î–ª—è –ø–ª–∞–Ω–æ–≤—ã—Ö —Å–º–µ–Ω:**
     - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ç–∞–≤–∫–∞ –∏–∑ `ShiftSchedule`
     - Fallback: —Å—Ç–∞–≤–∫–∞ –∏–∑ –æ–±—ä–µ–∫—Ç–∞
   - **–î–ª—è —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω:**
     - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ç–∞–≤–∫–∞ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–∞–π–º-—Å–ª–æ—Ç–∞
     - Fallback: —Å—Ç–∞–≤–∫–∞ –∏–∑ –æ–±—ä–µ–∫—Ç–∞

3. ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ Shift:**
   ```python
   new_shift = Shift(
       user_id=db_user.id,  # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID –∏–∑ –ë–î
       object_id=object_id,
       start_time=datetime.now(),
       status='active',
       start_coordinates=coordinates,
       hourly_rate=hourly_rate,
       time_slot_id=timeslot_id if shift_type == "planned" else None,
       schedule_id=schedule_id if shift_type == "planned" else None,
       is_planned=shift_type == "planned"
   )
   ```

## –¢–∏–ø—ã —Å–º–µ–Ω

### –ü–ª–∞–Ω–æ–≤—ã–µ —Å–º–µ–Ω—ã (`shift_type = "planned"`)
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–º–µ–Ω—ã –∏–∑ `ShiftSchedule`
- **–°–≤—è–∑–∏:** `time_slot_id`, `schedule_id`
- **–§–ª–∞–≥:** `is_planned = True`
- **–°—Ç–∞–≤–∫–∞:** –ò–∑ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–º–µ–Ω—ã –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞

### –°–ø–æ–Ω—Ç–∞–Ω–Ω—ã–µ —Å–º–µ–Ω—ã (`shift_type = "spontaneous"`)
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –í—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- **–°–≤—è–∑–∏:** `time_slot_id = None`, `schedule_id = None`
- **–§–ª–∞–≥:** `is_planned = False`
- **–°—Ç–∞–≤–∫–∞:** –ò–∑ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–∞–π–º-—Å–ª–æ—Ç–∞ –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞

## –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### UserAction.OPEN_SHIFT
- `step`: `UserStep.SHIFT_SELECTION` | `UserStep.OBJECT_SELECTION` | `UserStep.LOCATION_REQUEST` | `UserStep.PROCESSING`
- `shift_type`: "planned" | "spontaneous"
- `selected_object_id`: ID –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- `selected_timeslot_id`: ID —Ç–∞–π–º-—Å–ª–æ—Ç–∞ (–¥–ª—è –ø–ª–∞–Ω–æ–≤—ã—Ö)
- `selected_schedule_id`: ID –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–º–µ–Ω—ã (–¥–ª—è –ø–ª–∞–Ω–æ–≤—ã—Ö)

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏:
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω** ‚Üí –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ `/start`
2. **–£–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è —Å–º–µ–Ω–∞** ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π
3. **–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—ä–µ–∫—Ç—É** ‚Üí –æ—Ç–∫–∞–∑ –≤ –¥–æ—Å—Ç—É–ø–µ
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è** ‚Üí –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
5. **–û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω** ‚Üí –æ—à–∏–±–∫–∞ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –≤ –º–µ–Ω—é

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏:
- –ö–Ω–æ–ø–∫–∞ "üìç –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é –ø–æ–≤—Ç–æ—Ä–Ω–æ" –ø—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- –ö–Ω–æ–ø–∫–∞ "‚ùå –û—Ç–º–µ–Ω–∞" –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ –æ–±—ä–µ–∫—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `max_distance_meters` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–±—ä–µ–∫—Ç–∞
- –ö–Ω–æ–ø–∫–∞ `request_location=True` –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ –æ–±—ä–µ–∫—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `timezone_helper.format_local_time()`

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏—Å—Ç–µ–º—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ –∞–∫—Ç–∏–≤–Ω—ã–º –¥–æ–≥–æ–≤–æ—Ä–∞–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `EmployeeObjectsService`

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤—ã—Ö –∏ —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—é –¥–æ—Å—Ç—É–ø–∞ –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- ‚úÖ –ì–∏–±–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–∞—Å–æ–≤—ã—Ö —Å—Ç–∞–≤–æ–∫
- ‚úÖ –£–¥–æ–±–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π

–õ–æ–≥–∏–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
