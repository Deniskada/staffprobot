# –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Shared)

> **–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞  
> **–í–µ—Ä—Å–∏—è:** 2.0 (–ò—Ç–µ—Ä–∞—Ü–∏—è 24)  
> **–ê–¥–º–∏–Ω–∫–∞:** –ò—Ç–µ—Ä–∞—Ü–∏—è 25

---

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π StaffProBot –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### Notification (–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å)
- **–§–∞–π–ª:** `domain/entities/notification.py`
- **–¢–∞–±–ª–∏—Ü–∞:** `notifications`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### PaymentNotification (–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
- **–§–∞–π–ª:** `domain/entities/payment_notification.py`
- **–¢–∞–±–ª–∏—Ü–∞:** `payment_notifications`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–ª–∞—Ç–µ–∂–∞—Ö

### –°–µ—Ä–≤–∏—Å—ã

#### NotificationService (–û—Å–Ω–æ–≤–Ω–æ–π)
- **–§–∞–π–ª:** `shared/services/notification_service.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Redis —Å TTL 5 –º–∏–Ω—É—Ç

#### NotificationDispatcher (–î–∏—Å–ø–µ—Ç—á–µ—Ä)
- **–§–∞–π–ª:** `shared/services/notification_dispatcher.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ –∫–∞–Ω–∞–ª–∞–º

#### AdminNotificationService (–ê–¥–º–∏–Ω–∫–∞)
- **–§–∞–π–ª:** `apps/web/services/admin_notification_service.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞
- **–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ:** –†–∞—Å—à–∏—Ä—è–µ—Ç NotificationService

### –ö–∞–Ω–∞–ª—ã –¥–æ—Å—Ç–∞–≤–∫–∏

#### Email
- **–§–∞–π–ª:** `shared/services/senders/email_sender.py`
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** SMTP —á–µ—Ä–µ–∑ aiosmtplib
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω

#### SMS
- **–§–∞–π–ª:** `shared/services/senders/sms_sender.py`
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Twilio/SMSC/SmsAero
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω

#### Push
- **–§–∞–π–ª:** `shared/services/senders/push_sender.py`
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Web Push API —á–µ—Ä–µ–∑ pywebpush
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω

#### Telegram
- **–§–∞–π–ª:** `shared/services/senders/telegram_sender.py`
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Telegram Bot API
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

## üìä –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –°–º–µ–Ω—ã
- `SHIFT_REMINDER` ‚Äî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Å–º–µ–Ω–µ
- `SHIFT_CONFIRMED` ‚Äî –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–º–µ–Ω—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü—É)
- `SHIFT_CANCELLED` ‚Äî –°–º–µ–Ω–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞
- `SHIFT_STARTED` ‚Äî –°–º–µ–Ω–∞ –Ω–∞—á–∞–ª–∞—Å—å
- `SHIFT_COMPLETED` ‚Äî –°–º–µ–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### –î–æ–≥–æ–≤–æ—Ä—ã
- `CONTRACT_SIGNED` ‚Äî –î–æ–≥–æ–≤–æ—Ä –ø–æ–¥–ø–∏—Å–∞–Ω
- `CONTRACT_TERMINATED` ‚Äî –î–æ–≥–æ–≤–æ—Ä —Ä–∞—Å—Ç–æ—Ä–≥–Ω—É—Ç
- `CONTRACT_EXPIRING` ‚Äî –î–æ–≥–æ–≤–æ—Ä –∏—Å—Ç–µ–∫–∞–µ—Ç
- `CONTRACT_UPDATED` ‚Äî –î–æ–≥–æ–≤–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω

### –û—Ç–∑—ã–≤—ã
- `REVIEW_RECEIVED` ‚Äî –ü–æ–ª—É—á–µ–Ω –æ—Ç–∑—ã–≤
- `REVIEW_MODERATED` ‚Äî –û—Ç–∑—ã–≤ –ø—Ä–æ–º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞–Ω
- `APPEAL_SUBMITTED` ‚Äî –ü–æ–¥–∞–Ω–æ –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏–µ
- `APPEAL_DECISION` ‚Äî –†–µ—à–µ–Ω–∏–µ –ø–æ –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—é

### –ü–ª–∞—Ç–µ–∂–∏
- `PAYMENT_DUE` ‚Äî –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–π –ø–ª–∞—Ç–µ–∂
- `PAYMENT_SUCCESS` ‚Äî –£—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂
- `PAYMENT_FAILED` ‚Äî –ù–µ—É–¥–∞—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂
- `SUBSCRIPTION_EXPIRING` ‚Äî –ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç
- `SUBSCRIPTION_EXPIRED` ‚Äî –ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞
- `USAGE_LIMIT_WARNING` ‚Äî –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ª–∏–º–∏—Ç–µ
- `USAGE_LIMIT_EXCEEDED` ‚Äî –õ–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω

### –°–∏—Å—Ç–µ–º–Ω—ã–µ
- `WELCOME` ‚Äî –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `PASSWORD_RESET` ‚Äî –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
- `ACCOUNT_SUSPENDED` ‚Äî –ê–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- `ACCOUNT_ACTIVATED` ‚Äî –ê–∫–∫–∞—É–Ω—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- `SYSTEM_MAINTENANCE` ‚Äî –°–∏—Å—Ç–µ–º–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- `FEATURE_ANNOUNCEMENT` ‚Äî –ê–Ω–æ–Ω—Å –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

---

## üîÑ –°—Ç–∞—Ç—É—Å—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

- `PENDING` ‚Äî –û–∂–∏–¥–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏
- `SENT` ‚Äî –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- `DELIVERED` ‚Äî –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- `FAILED` ‚Äî –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
- `READ` ‚Äî –ü—Ä–æ—á–∏—Ç–∞–Ω–æ
- `CANCELLED` ‚Äî –û—Ç–º–µ–Ω–µ–Ω–æ

---

## üì± –ö–∞–Ω–∞–ª—ã –¥–æ—Å—Ç–∞–≤–∫–∏

- `EMAIL` ‚Äî Email
- `SMS` ‚Äî SMS
- `PUSH` ‚Äî Web Push
- `TELEGRAM` ‚Äî Telegram
- `IN_APP` ‚Äî –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- `WEBHOOK` ‚Äî Webhook
- `SLACK` ‚Äî Slack
- `DISCORD` ‚Äî Discord

---

## ‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

- `LOW` ‚Äî –ù–∏–∑–∫–∏–π (–¥–∞–π–¥–∂–µ—Å—Ç—ã, –Ω–æ–≤–æ—Å—Ç–∏)
- `NORMAL` ‚Äî –û–±—ã—á–Ω—ã–π (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- `HIGH` ‚Äî –í—ã—Å–æ–∫–∏–π (–≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è)
- `URGENT` ‚Äî –°—Ä–æ—á–Ω—ã–π (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ, –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è rate limit)

---

## üõ† API Endpoints

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ API
```
GET    /api/notifications                   # –°–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET    /api/notifications/unread/count      # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
POST   /api/notifications/{id}/read         # –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
POST   /api/notifications/read-all          # –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
DELETE /api/notifications/{id}              # –£–¥–∞–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

GET    /api/notifications/preferences       # –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
POST   /api/notifications/preferences       # –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
POST   /api/notifications/push/subscribe    # –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Push
POST   /api/notifications/push/unsubscribe  # –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç Push
```

### –ê–¥–º–∏–Ω—Å–∫–∏–µ API
```
GET    /admin/notifications/                # –î–∞—à–±–æ—Ä–¥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
GET    /admin/notifications/list            # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
GET    /admin/notifications/analytics       # –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
GET    /admin/notifications/templates      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏
GET    /admin/notifications/settings       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–æ–≤

POST   /admin/api/notifications/bulk/cancel # –û—Ç–º–µ–Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
POST   /admin/api/notifications/bulk/retry  # –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
POST   /admin/api/notifications/bulk/delete # –£–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
POST   /admin/api/notifications/bulk/export # –≠–∫—Å–ø–æ—Ä—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
POST   /admin/api/notifications/test        # –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
```

---

## üìù –®–∞–±–ª–æ–Ω—ã

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- **–§–∞–π–ª—ã:** `shared/templates/notifications/`
- **–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å:** `shared/templates/notifications/base_templates.py`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `{{user_name}}` ‚Äî –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{{object_name}}` ‚Äî –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
- `{{shift_date}}` ‚Äî –î–∞—Ç–∞ —Å–º–µ–Ω—ã
- `{{contract_number}}` ‚Äî –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞
- `{{review_rating}}` ‚Äî –†–µ–π—Ç–∏–Ω–≥ –æ—Ç–∑—ã–≤–∞

### –§–æ—Ä–º–∞—Ç—ã
- **HTML** ‚Äî –¥–ª—è Email –∫–∞–Ω–∞–ª–∞
- **Plain Text** ‚Äî –¥–ª—è SMS, Telegram, Push
- **Markdown** ‚Äî –¥–ª—è Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–æ–≤

### Email (SMTP)
```bash
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=notifications@staffprobot.ru
SMTP_PASSWORD=***
SMTP_FROM=StaffProBot <notifications@staffprobot.ru>
```

### SMS (Twilio)
```bash
TWILIO_ACCOUNT_SID=***
TWILIO_AUTH_TOKEN=***
TWILIO_PHONE_NUMBER=+7...
```

### Push (VAPID)
```bash
VAPID_PUBLIC_KEY=***
VAPID_PRIVATE_KEY=***
VAPID_SUBJECT=mailto:admin@staffprobot.ru
```

### Telegram (Bot)
```bash
TELEGRAM_BOT_TOKEN_PROD=***
# –î–ª—è dev –æ–∫—Ä—É–∂–µ–Ω–∏—è: TELEGRAM_BOT_TOKEN_DEV=***
# –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–¥–∞—Ç—å TELEGRAM_BOT_TOKEN_OVERRIDE
TELEGRAM_WEBHOOK_URL=https://staffprobot.ru/webhook/telegram
```

---

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏
- **Delivery Rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –∫–∞–Ω–∞–ª–∞–º
- **Read Rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—á—Ç–µ–Ω–∏—è –ø–æ —Ç–∏–ø–∞–º
- **Error Rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã
- **Response Time** ‚Äî –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –∫–∞–Ω–∞–ª–æ–≤

### –û—Ç—á–µ—Ç—ã
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º (–¥–µ–Ω—å, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü)
- –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–æ–≤
- –¢—Ä–µ–Ω–¥—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Rate Limiting
- **–û–±—ã—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** 10/—á–∞—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–°—Ä–æ—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:** 100/—á–∞—Å –Ω–∞ –∞–¥–º–∏–Ω–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ email –∞–¥—Ä–µ—Å–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è/–æ—Ç–ø—Ä–∞–≤–∫–∏
- –û—à–∏–±–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –ê–¥–º–∏–Ω—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
- **–§–∞–π–ª—ã:** `tests/unit/test_notification_service.py`
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** > 90%
- **–ú–æ–∫–∏:** –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (SMTP, SMS, Push)

### Integration —Ç–µ—Å—Ç—ã
- **–§–∞–π–ª—ã:** `tests/integration/test_notifications.py`
- **–°—Ü–µ–Ω–∞—Ä–∏–∏:** –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ–∑–¥–∞–Ω–∏—è ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∏ ‚Üí —á—Ç–µ–Ω–∏—è

### E2E —Ç–µ—Å—Ç—ã
- –†–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –≤—Å–µ–º –∫–∞–Ω–∞–ª–∞–º
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–æ–π –ø–∞–Ω–µ–ª–∏

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
- `notifications_created_total` ‚Äî —Å–æ–∑–¥–∞–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `notifications_sent_total` ‚Äî –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `notifications_delivered_total` ‚Äî –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `notifications_failed_total` ‚Äî –Ω–µ—É–¥–∞—á–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
- `notification_delivery_duration_seconds` ‚Äî –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏

### –ê–ª–µ—Ä—Ç—ã
- –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ (> 5%)
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ (> 30 —Å–µ–∫)
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞–Ω–∞–ª–æ–≤
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ rate limit

---

## üîß Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ Celery
docker compose -f docker-compose.prod.yml exec celery-worker celery -A core.celery.celery_app inspect active

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
docker compose -f docker-compose.prod.yml exec redis redis-cli info memory
```

#### –û—à–∏–±–∫–∏ SMTP
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ SMTP
docker compose -f docker-compose.prod.yml exec web python -c "
from shared.services.senders.email_sender import EmailNotificationSender
sender = EmailNotificationSender()
print(sender.test_connection())
"
```

#### –ü—Ä–æ–±–ª–µ–º—ã —Å Push
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ VAPID –∫–ª—é—á–µ–π
docker compose -f docker-compose.prod.yml exec web python -c "
from shared.services.senders.push_sender import PushNotificationSender
sender = PushNotificationSender()
print(sender.validate_vapid_keys())
"
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–ò—Ç–µ—Ä–∞—Ü–∏—è 24](../plans/iteration24/README.md)** ‚Äî –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **[–ò—Ç–µ—Ä–∞—Ü–∏—è 25](../plans/iteration25/README.md)** ‚Äî –ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **[–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](../plans/iteration25/TECHNICAL_GUIDE.md)** ‚Äî –î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üöÄ –†–∞–∑–≤–∏—Ç–∏–µ

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Slack/Discord
- –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω—ã
- –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ì–µ–æ—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- **Issues:** –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞–¥–∞—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- **Feature Requests:** –ü—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **Bug Reports:** –°–æ–æ–±—â–∞–π—Ç–µ –æ–± –æ—à–∏–±–∫–∞—Ö —Å –ª–æ–≥–∞–º–∏

---

**–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π StaffProBot ‚Äî –Ω–∞–¥–µ–∂–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö! üîî**

