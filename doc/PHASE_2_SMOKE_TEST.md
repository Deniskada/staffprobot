# üß™ Smoke Test –ü–ª–∞–Ω –¥–ª—è Phase 2: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á

## üìã –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_collect_shift_tasks()` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ **"–ú–æ–∏ –∑–∞–¥–∞—á–∏"** –∏ –≤—Å–µ –∑–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–ø–æ–Ω—Ç–∞–Ω–Ω–∞—è —Å–º–µ–Ω–∞ + –ó–∞–¥–∞—á–∏ –æ–±—ä–µ–∫—Ç–∞**
**–£—Å–ª–æ–≤–∏–µ:** –û—Ç–∫—Ä–æ–π—Ç–µ —Å–ø–æ–Ω—Ç–∞–Ω–Ω—É—é —Å–º–µ–Ω—É –Ω–∞ –æ–±—ä–µ–∫—Ç–µ —Å –∑–∞–¥–∞—á–∞–º–∏

**–®–∞–≥–∏:**
1. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É" ‚Üí "‚ö° –í–Ω–µ–ø–ª–∞–Ω–æ–≤–∞—è —Å–º–µ–Ω–∞"
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç (—É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –æ–±—ä–µ–∫—Ç–∞ –µ—Å—Ç—å `shift_tasks` –≤ –ë–î)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é
4. ‚úÖ –°–º–µ–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
5. –ù–∞–∂–º–∏—Ç–µ "–ú–æ–∏ –∑–∞–¥–∞—á–∏" 
6. **–ü–†–û–í–ï–†–ö–ê**: –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –í–°–ï –∑–∞–¥–∞—á–∏ –æ–±—ä–µ–∫—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ–∫–∞–∑–∞–Ω
- ‚úÖ –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –∏–º–µ–µ—Ç –∏–∫–æ–Ω–∫—É (‚ö†Ô∏è/‚≠ê), —Ç–µ–∫—Å—Ç, —Ü–µ–Ω—É
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

**SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```sql
SELECT id, name, shift_tasks FROM objects WHERE id = <object_id> LIMIT 1;
-- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞—á–∏ –≤ shift_tasks (JSONB)
```

---

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–º–µ–Ω–∞ + –ó–∞–¥–∞—á–∏ —Ç–∞–π–º-—Å–ª–æ—Ç–∞**
**–£—Å–ª–æ–≤–∏–µ:** –ù–∞ —Å–µ–≥–æ–¥–Ω—è –µ—Å—Ç—å —Ç–∞–π–º-—Å–ª–æ—Ç —Å –∑–∞–¥–∞—á–∞–º–∏

**–®–∞–≥–∏:**
1. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É" ‚Üí "üìÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–º–µ–Ω—ã"
2. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–º–µ–Ω—É
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é
4. ‚úÖ –°–º–µ–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
5. –ù–∞–∂–º–∏—Ç–µ "–ú–æ–∏ –∑–∞–¥–∞—á–∏"
6. **–ü–†–û–í–ï–†–ö–ê**: –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –∑–∞–¥–∞—á–∏ –∏–∑ `TimeslotTaskTemplate`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –∏–∑ —Ç–∞–π–º-—Å–ª–æ—Ç–∞ –ø–æ–∫–∞–∑–∞–Ω
- ‚úÖ –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –∏–º–µ–µ—Ç: —Ç–µ–∫—Å—Ç, —Ü–µ–Ω—É, –∏–∫–æ–Ω–∫—É –º–µ–¥–∏–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "–ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

**SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```sql
SELECT id, timeslot_id FROM shifts WHERE status = 'active' ORDER BY created_at DESC LIMIT 1;
SELECT id, slot_date, ignore_object_tasks FROM time_slots WHERE id = <timeslot_id>;
SELECT task_text, deduction_amount, requires_media FROM timeslot_task_templates 
  WHERE timeslot_id = <timeslot_id> ORDER BY display_order;
```

---

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–º–µ–Ω–∞ + –ö–æ–º–±–æ (—Ç–∞–π–º-—Å–ª–æ—Ç + –æ–±—ä–µ–∫—Ç)**
**–£—Å–ª–æ–≤–∏–µ:** –¢–∞–π–º-—Å–ª–æ—Ç –∏–º–µ–µ—Ç `ignore_object_tasks = false` + –æ–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç `shift_tasks`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–º–µ–Ω—É (—Å `ignore_object_tasks = false`)
2. –°–º–µ–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
3. –ù–∞–∂–º–∏—Ç–µ "–ú–æ–∏ –∑–∞–¥–∞—á–∏"
4. **–ü–†–û–í–ï–†–ö–ê**: –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞—á–∏ –ò–ó –û–ë–û–ò–• –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—Ç–∞–π–º-—Å–ª–æ—Ç + –æ–±—ä–µ–∫—Ç)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–¥–∞—á–∏ –∏–∑ —Ç–∞–π–º-—Å–ª–æ—Ç–∞ (–ø–µ—Ä–≤—ã–µ, —Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º 'timeslot')
- ‚úÖ –ó–∞–¥–∞—á–∏ –∏–∑ –æ–±—ä–µ–∫—Ç–∞ (–≤—Ç–æ—Ä—ã–µ, —Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º 'object')
- ‚úÖ –í—Å–µ–≥–æ –∑–∞–¥–∞—á = –∫–æ–ª-–≤–æ –∏–∑ TimeslotTaskTemplate + –∫–æ–ª-–≤–æ –∏–∑ object.shift_tasks

**SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```sql
SELECT COUNT(*) FROM timeslot_task_templates WHERE timeslot_id = <timeslot_id>;
SELECT jsonb_array_length(shift_tasks) FROM objects WHERE id = <object_id>;
-- –°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–≤–Ω—è—Ç—å—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–¥–∞—á –≤ "–ú–æ–∏ –∑–∞–¥–∞—á–∏"
```

---

### **–°—Ü–µ–Ω–∞—Ä–∏–π 4: –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–º–µ–Ω–∞ + ignore_object_tasks = true**
**–£—Å–ª–æ–≤–∏–µ:** –¢–∞–π–º-—Å–ª–æ—Ç –∏–º–µ–µ—Ç `ignore_object_tasks = true`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–º–µ–Ω—É (—Å `ignore_object_tasks = true`)
2. –ù–∞–∂–º–∏—Ç–µ "–ú–æ–∏ –∑–∞–¥–∞—á–∏"
3. **–ü–†–û–í–ï–†–ö–ê**: –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –¢–û–õ–¨–ö–û –∑–∞–¥–∞—á–∏ —Ç–∞–π–º-—Å–ª–æ—Ç–∞, –ë–ï–ó –∑–∞–¥–∞—á –æ–±—ä–µ–∫—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ –∏–∑ `TimeslotTaskTemplate`
- ‚úÖ –ó–∞–¥–∞—á–∏ –æ–±—ä–µ–∫—Ç–∞ –ù–ï –≤–∏–¥–Ω—ã
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á = COUNT(*) –∏–∑ timeslot_task_templates

---

### **–°—Ü–µ–Ω–∞—Ä–∏–π 5: –û—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é**
**–£—Å–ª–æ–≤–∏–µ:** –ê–∫—Ç–∏–≤–Ω–∞—è —Å–º–µ–Ω–∞ —Å –∑–∞–¥–∞—á–∞–º–∏

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ "–ú–æ–∏ –∑–∞–¥–∞—á–∏"
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É (–±–µ–∑ –º–µ–¥–∏–∞-–æ—Ç—á–µ—Ç–∞)
3. ‚úÖ –ó–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∞–µ—Ç –≥–∞–ª–æ—á–∫—É ‚úì
4. –ù–∞–∂–º–∏—Ç–µ –µ—â—ë —Ä–∞–∑
5. ‚úÖ –ì–∞–ª–æ—á–∫–∞ —É–±–∏—Ä–∞–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Toggle —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í `UserState` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `completed_tasks`
- ‚úÖ –ü–æ—Å–ª–µ /start —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
–ü–æ–∏—Å–∫ –≤ –ª–æ–≥–∞—Ö: `[MY_TASKS] Task: ...`

---

### **–°—Ü–µ–Ω–∞—Ä–∏–π 6: –ó–∞–¥–∞—á–∞ —Å –º–µ–¥–∏–∞-–æ—Ç—á–µ—Ç–æ–º**
**–£—Å–ª–æ–≤–∏–µ:** –í "–ú–æ–∏ –∑–∞–¥–∞—á–∏" –µ—Å—Ç—å –∑–∞–¥–∞—á–∞ —Å –∏–∫–æ–Ω–∫–æ–π üì∏

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ "–ú–æ–∏ –∑–∞–¥–∞—á–∏"
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–∞–¥–∞—á—É —Å üì∏
3. ‚úÖ –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ
5. ‚úÖ –§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram –≥—Ä—É–ø–ø—É
6. ‚úÖ –ó–∞–¥–∞—á–∞ –æ—Ç–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è ‚úÖ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ú–µ–¥–∏–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram
- ‚úÖ –í `task_media` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –∏ —Ç–∏–ø
- ‚úÖ –ó–∞–¥–∞—á–∞ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è

---

### **–°—Ü–µ–Ω–∞—Ä–∏–π 7: –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã –ø–æ—Å–ª–µ "–ú–æ–∏ –∑–∞–¥–∞—á–∏"**
**–£—Å–ª–æ–≤–∏–µ:** –í—ã–ø–æ–ª–Ω–∏–ª–∏ –∑–∞–¥–∞—á–∏ –≤ "–ú–æ–∏ –∑–∞–¥–∞—á–∏", —Ç–µ–ø–µ—Ä—å –∑–∞–∫—Ä—ã–≤–∞–µ–º —Å–º–µ–Ω—É

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ "–ú–æ–∏ –∑–∞–¥–∞—á–∏"
2. –û—Ç–º–µ—Ç—å—Ç–µ 2-3 –∑–∞–¥–∞—á–∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
3. –ó–∞–∫—Ä–æ–π—Ç–µ —Å–º–µ–Ω—É (—á–µ—Ä–µ–∑ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é
5. ‚úÖ –°–º–µ–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
6. **–ü–†–û–í–ï–†–ö–ê**: –í `shift.notes` –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è `completed_tasks`

**SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```sql
SELECT id, notes FROM shifts 
WHERE status = 'closed' 
ORDER BY closed_at DESC LIMIT 1;
-- –í notes –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å JSON —Å [TASKS]{...completed_tasks: [0, 1, 2]}
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
logger.info("Saved completed tasks info", shift_id=..., completed_count=..., total_count=..., media_count=...)
```

---

### **–°—Ü–µ–Ω–∞—Ä–∏–π 8: –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –∑–∞ –∑–∞–¥–∞—á–∏**
**–£—Å–ª–æ–≤–∏–µ:** –°–º–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∞, –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

**–®–∞–≥–∏:**
1. –ó–∞–∫—Ä–æ–π—Ç–µ —Å–º–µ–Ω—É —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 –º–∏–Ω—É—Ç (–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é Celery –∑–∞–¥–∞—á—É)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–∑–¥–∞–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏

**SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```sql
SELECT * FROM salary_adjustments 
WHERE shift_id = <shift_id> 
ORDER BY created_at DESC;
-- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏:
-- - shift_base (–∑–∞ —Å–∞–º—É —Å–º–µ–Ω—É)
-- - task_bonus –∏–ª–∏ task_penalty (–∑–∞ –∑–∞–¥–∞—á–∏)
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏:**
- ‚úÖ `shift_base` - –æ–ø–ª–∞—Ç–∞ –∑–∞ —Å–º–µ–Ω—É
- ‚úÖ `task_bonus` - –ø—Ä–µ–º–∏—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É
- ‚úÖ `task_penalty` - —à—Ç—Ä–∞—Ñ –∑–∞ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ `task_completed` - –Ω—É–ª–µ–≤–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –¥–ª—è –∑–∞–¥–∞—á —Å –º–µ–¥–∏–∞ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

---

## ‚ö†Ô∏è –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ –ª–æ–≥–∞—Ö

### –í–∞–∂–Ω—ã–µ –ª–æ–≥–∏:
```
[MY_TASKS] Loading/creating state for user ...
[MY_TASKS] Combined tasks from timeslot and object
[MY_TASKS] Reusing existing state with ... completed tasks
[MY_TASKS] Task list shown successfully
```

### –ù–∞ —á—Ç–æ –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ:
```
‚ùå ERROR: IndexError: list index out of range
‚ùå ERROR: Task not found
‚ùå ERROR: Loading/creating state failed
```

---

## üì± Checklist –¥–ª—è —Ç–µ—Å—Ç–µ—Ä–∞

| # | –°—Ü–µ–Ω–∞—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---|----------|--------|-----------|
| 1 | –°–ø–æ–Ω—Ç–∞–Ω–Ω–∞—è —Å–º–µ–Ω–∞ + –æ–±—ä–µ–∫—Ç-–∑–∞–¥–∞—á–∏ | ‚òê | |
| 2 | –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–º–µ–Ω–∞ + —Ç–∞–π–º-—Å–ª–æ—Ç-–∑–∞–¥–∞—á–∏ | ‚òê | |
| 3 | –ö–æ–º–±–æ: —Ç–∞–π–º-—Å–ª–æ—Ç + –æ–±—ä–µ–∫—Ç (ignore=false) | ‚òê | |
| 4 | –¢–æ–ª—å–∫–æ —Ç–∞–π–º-—Å–ª–æ—Ç (ignore=true) | ‚òê | |
| 5 | Toggle –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ | ‚òê | |
| 6 | –ú–µ–¥–∏–∞-–æ—Ç—á–µ—Ç –¥–ª—è –∑–∞–¥–∞—á–∏ | ‚òê | |
| 7 | –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ notes | ‚òê | |
| 8 | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫ –≤ salary_adjustments | ‚òê | |

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–º–µ–Ω—ã:
```sql
SELECT id, user_id, object_id, time_slot_id, status, start_time, closed_at, notes 
FROM shifts 
WHERE status IN ('active', 'closed')
ORDER BY created_at DESC LIMIT 5;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–¥–∞—á–∏ —Ç–∞–π–º-—Å–ª–æ—Ç–∞:
```sql
SELECT id, timeslot_id, task_text, deduction_amount, requires_media, display_order
FROM timeslot_task_templates
WHERE timeslot_id = <timeslot_id>
ORDER BY display_order;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏:
```sql
SELECT id, shift_id, adjustment_type, amount, details, created_at
FROM salary_adjustments
WHERE shift_id = <shift_id>
ORDER BY created_at;
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Docker:
```bash
docker compose -f docker-compose.dev.yml logs -f bot --tail 100
docker compose -f docker-compose.dev.yml logs -f web --tail 100
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

‚úÖ **–í—Å–µ 8 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø—Ä–æ–π–¥–µ–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫**
‚úÖ **–í –ª–æ–≥–∞—Ö –Ω–µ—Ç ERROR —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–æ –∑–∞–¥–∞—á–∏**
‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**
‚úÖ **–ú–µ–¥–∏–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram –≥—Ä—É–ø–ø—É**
‚úÖ **UserState —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç completed_tasks –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏**

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ smoke test

1. –ï—Å–ª–∏ –≤—Å–µ –û–ö ‚Üí –≥–æ—Ç–æ–≤–æ –∫ Phase 3 (–§–∏–∫—Å–∏–Ω–≥ "–ó–∞–∫—Ä—ã—Ç—å –æ–±—ä–µ–∫—Ç")
2. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ ‚Üí –∑–∞–ª–æ–≥ –≤ Cursor/Project Brain —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
