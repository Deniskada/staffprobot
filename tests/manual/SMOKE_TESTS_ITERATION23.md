# Smoke-—Ç–µ—Å—Ç—ã –ò—Ç–µ—Ä–∞—Ü–∏–∏ 23 (Dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ)

## üéØ –¶–µ–ª—å
–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Å–∏—Å—Ç–µ–º—ã —É—á–µ—Ç–∞ –≤—ã–ø–ª–∞—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ production.

---

## ‚úÖ 1. –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ seed-–¥–∞–Ω–Ω—ã–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –í–µ—Ä—Å–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose -f docker-compose.dev.yml exec postgres psql -U postgres -d staffprobot_dev -c "SELECT version_num FROM alembic_version;"
# –û–∂–∏–¥–∞–µ—Ç—Å—è: c4ea4d69992c

# –°–∏—Å—Ç–µ–º—ã –æ–ø–ª–∞—Ç—ã (seed)
docker compose -f docker-compose.dev.yml exec postgres psql -U postgres -d staffprobot_dev -c "SELECT code, name FROM payment_systems;"
# –û–∂–∏–¥–∞–µ—Ç—Å—è: 3 —Å—Ç—Ä–æ–∫–∏ (simple_hourly, salary, hourly_bonus)
```

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è `c4ea4d69992c` –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- [x] 3 —Å–∏—Å—Ç–µ–º—ã –æ–ø–ª–∞—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã

---

## ‚úÖ 2. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –î–µ–π—Å—Ç–≤–∏—è
1. –ó–∞–π—Ç–∏ –Ω–∞ `http://localhost:8001/owner/org-structure`
2. –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ"
   - –†–æ–¥–∏—Ç–µ–ª—å: "–û—Å–Ω–æ–≤–Ω–æ–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ"
   - –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã: "–ü–æ–≤—Ä–µ–º–µ–Ω–Ω–æ-–ø—Ä–µ–º–∏–∞–ª—å–Ω–∞—è"
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ
- [ ] –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –¥–µ—Ä–µ–≤–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–µ–π
- [ ] –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

---

## ‚úÖ 3. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

### –î–µ–π—Å—Ç–≤–∏—è
1. –ó–∞–π—Ç–∏ –Ω–∞ `/owner/employees/create`
2. –°–æ–∑–¥–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä:
   - –ü–æ—á–∞—Å–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞: 1000‚ÇΩ
   - ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å—Ç–∞–≤–∫–∏ –∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞**
   - –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã: "–ü–æ–≤—Ä–µ–º–µ–Ω–Ω–æ-–ø—Ä–µ–º–∏–∞–ª—å–Ω–∞—è"
   - ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –æ–ø–ª–∞—Ç—ã –∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞**
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
4. –ü–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –û–±–∞ —á–µ–∫–±–æ–∫—Å–∞ –æ—Ç–º–µ—á–µ–Ω—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
- [ ] –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î

---

## ‚úÖ 4. –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Å –∑–∞–¥–∞—á–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

### –î–µ–π—Å—Ç–≤–∏—è
1. –ó–∞–π—Ç–∏ –Ω–∞ `/owner/objects/create`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "–û—Å–Ω–æ–≤–Ω–æ–µ":
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–¢–µ—Å—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç"
   - –ê–¥—Ä–µ—Å, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–§–∏–Ω–∞–Ω—Å—ã":
   - –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: –≤—ã–±—Ä–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –≤ –ø.2
   - –ü–æ—á–∞—Å–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞: 500‚ÇΩ
   - –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã: "–ù–µ —É–∫–∞–∑–∞–Ω–æ (–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è)"
   - ‚úÖ –î–æ–ø—É—Å—Ç–∏–º–æ–µ –æ–ø–æ–∑–¥–∞–Ω–∏–µ: 10 –º–∏–Ω—É—Ç
   - –°—Ç–æ–∏–º–æ—Å—Ç—å —à—Ç—Ä–∞—Ñ–∞: 5‚ÇΩ/–º–∏–Ω
4. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã –∏ –∑–∞–¥–∞—á–∏":
   - –ó–∞–¥–∞—á–∞ 1: "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è", -150‚ÇΩ
   - –ó–∞–¥–∞—á–∞ 2: "–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è", +100‚ÇΩ
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —Å 3 –≤–∫–ª–∞–¥–∫–∞–º–∏
- [ ] –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ
- [ ] –ó–∞–¥–∞—á–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à—Ç—Ä–∞—Ñ–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

---

## ‚úÖ 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã –æ–ø–ª–∞—Ç—ã

### –î–µ–π—Å—Ç–≤–∏—è
1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º –∏–∑ –ø.3 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–º–µ–Ω—É –Ω–∞ –æ–±—ä–µ–∫—Ç–µ –∏–∑ –ø.4
2. –ó–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–º–µ–Ω—É (–Ω–µ –≤—ã–ø–æ–ª–Ω–∏–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é –∑–∞–¥–∞—á—É, –≤—ã–ø–æ–ª–Ω–∏–≤ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é)
3. –ó–∞–π—Ç–∏ –Ω–∞ `/owner/shift-tasks?object_id=...`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î:
```sql
SELECT * FROM payroll_deductions WHERE details->>'shift_id' = '{shift_id}';
SELECT * FROM payroll_bonuses WHERE details->>'shift_id' = '{shift_id}';
```

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –ù–∞ `/owner/shift-tasks` –≤–∏–¥–Ω—ã –∑–∞–¥–∞—á–∏ —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- [ ] –í –ë–î **–µ—Å—Ç—å** —Ä–µ–∞–ª—å–Ω—ã–µ —É–¥–µ—Ä–∂–∞–Ω–∏—è/–ø—Ä–µ–º–∏–∏ (—Ç.–∫. —Å–∏—Å—Ç–µ–º–∞ = 3 –∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞)
- [ ] –ü–æ—è—Å–Ω–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

---

## ‚úÖ 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)

### –î–µ–π—Å—Ç–≤–∏—è
1. –°–Ω—è—Ç—å —á–µ–∫–±–æ–∫—Å "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –æ–ø–ª–∞—Ç—ã –∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞" —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä
3. –û—Ç–∫—Ä—ã—Ç—å –∏ –∑–∞–∫—Ä—ã—Ç—å –Ω–æ–≤—É—é —Å–º–µ–Ω—É –Ω–∞ —Ç–æ–º –∂–µ –æ–±—ä–µ–∫—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –í –ë–î **–ù–ï–¢** –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π (—Ç.–∫. –æ–±—ä–µ–∫—Ç –Ω–∞—Å–ª–µ–¥—É–µ—Ç —Å–∏—Å—Ç–µ–º—É –æ—Ç –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è ‚Üí 3, –Ω–æ —É –æ–±—ä–µ–∫—Ç–∞ —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–æ 1 –≤ –ø.4? –ò–ª–∏ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è?)
- [ ] –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## ‚úÖ 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ UI —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ

### –î–µ–π—Å—Ç–≤–∏—è
1. –°–æ–∑–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ —Å –ø—Ä–∞–≤–æ–º `can_manage_payroll = true`
2. –ó–∞–π—Ç–∏ –ø–æ–¥ —É–ø—Ä–∞–≤–ª—è—é—â–∏–º –Ω–∞ `/manager/payroll`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏ —Å–ø–∏—Å–æ–∫ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –í–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –ø–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º
- [ ] –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –ø—Ä–∞–≤–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

---

## ‚úÖ 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

### –ö–æ–º–∞–Ω–¥–∞
```bash
docker compose -f docker-compose.dev.yml logs web --tail=100 | grep -i "error\|exception"
```

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [x] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –Ω–µ—Ç
- [x] Web –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

---

## ‚úÖ 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–µ–π—Å—Ç–≤–∏—è
1. –û—Ç–∫—Ä—ã—Ç—å `/owner/org-structure` (–¥–µ—Ä–µ–≤–æ)
2. –û—Ç–∫—Ä—ã—Ç—å `/owner/payroll` (—Å–ø–∏—Å–æ–∫)
3. –û—Ç–∫—Ä—ã—Ç—å `/owner/shift-tasks` (—Ñ–∏–ª—å—Ç—Ä—ã)

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è < 1 —Å–µ–∫
- [ ] –ù–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- [ ] UI –æ—Ç–∑—ã–≤—á–∏–≤—ã–π

---

## üìù –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è `c4ea4d69992c` –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- [x] Seed-–¥–∞–Ω–Ω—ã–µ (3 —Å–∏—Å—Ç–µ–º—ã –æ–ø–ª–∞—Ç—ã) –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- [x] –õ–æ–≥–∏ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [x] Web –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç–∞–±–∏–ª–µ–Ω

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –î–æ–≥–æ–≤–æ—Ä—ã —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è
- [ ] –û–±—ä–µ–∫—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–∏—Å—Ç–µ–º—ã –æ–ø–ª–∞—Ç—ã —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ Celery
- [ ] UI —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ `/manager/payroll` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ—è—Å–Ω–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

## üöÄ –°—Ç–∞—Ç—É—Å: 4/10 –ø—Ä–æ–≤–µ—Ä–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä—É—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø.2-7, 9) –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ prod.

