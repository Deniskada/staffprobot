{% extends "manager/base_manager.html" %}
{% block title %}Задачи - Шаблоны{% endblock %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between mb-3">
    <div>
      <h2>Библиотека шаблонов задач</h2>
      <p class="text-muted">Шаблоны задач на ваших объектах.</p>
      <div class="form-check form-switch mt-2">
        <input class="form-check-input" type="checkbox" id="showInactiveToggle" 
               {{ 'checked' if show_inactive else '' }}
               onchange="window.location.href='/manager/tasks/templates?show_inactive=' + (this.checked ? '1' : '0')">
        <label class="form-check-label text-muted" for="showInactiveToggle">
          Показывать неактивные шаблоны
        </label>
      </div>
    </div>
  </div>
  
  <table class="table table-sm table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Код</th>
        <th>Название</th>
        <th>Обязательна</th>
        <th>Требует медиа</th>
        <th>Бонус/Штраф</th>
      </tr>
    </thead>
    <tbody>
    {% for t in templates_list %}
      <tr class="{{ 'text-muted' if not t.is_active else '' }}">
        <td>{{ t.id }}</td>
        <td><code>{{ t.code }}</code></td>
        <td>
          {{ t.title }}
          {% if not t.is_active %}
            <span class="badge bg-secondary ms-1">Неактивен</span>
          {% endif %}
        </td>
        <td>{{ 'Да' if t.is_mandatory else 'Нет' }}</td>
        <td>{{ 'Да' if t.requires_media else 'Нет' }}</td>
        <td>{{ t.default_bonus_amount or '—' }}</td>
      </tr>
    {% else %}
      <tr><td colspan="6" class="text-center text-muted">Нет доступных шаблонов.</td></tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

