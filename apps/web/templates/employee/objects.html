{% extends "employee/base_employee.html" %}

{% block title %}StaffProBot - Поиск работы{% endblock %}

{% block extra_css %}
<style>
.map-container {
    height: 600px;
    width: 100%;
}
.map-popup {
    min-width: 200px;
}
.ymaps-2-1-79-balloon {
    min-width: 200px;
}

/* Стили для списка объектов */
.object-item {
    border: none;
    border-bottom: 1px solid #e9ecef;
    transition: all 0.2s ease;
    cursor: pointer;
}

.object-item:hover {
    background-color: #f8f9fa;
    transform: translateX(2px);
}

.object-item:last-child {
    border-bottom: none;
}

.object-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #212529;
    margin-bottom: 0.5rem;
}

.object-salary {
    font-size: 0.95rem;
    color: #28a745;
    font-weight: 500;
    margin-bottom: 0.25rem;
}

.object-address {
    font-size: 0.85rem;
    color: #6c757d;
    margin-bottom: 0.75rem;
    transition: color 0.2s ease;
}

.object-address:hover {
    color: #007bff;
    text-decoration: underline;
}

.object-apply-btn {
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: 500;
    transition: all 0.2s ease;
}

.object-apply-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,123,255,0.3);
}

.currency-symbol {
    font-family: 'Times New Roman', serif;
    font-weight: bold;
}

/* Адаптивность */
@media (max-width: 991.98px) {
    .map-container {
        height: 400px;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="row g-3">
    <!-- Список объектов (2/7) -->
    <div class="col-12 col-lg-3">
        <div class="card h-100">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="bi bi-briefcase"></i> Доступные вакансии
                </h5>
            </div>
            <div class="card-body p-0" style="max-height: 600px; overflow-y: auto;">
                <div id="objects-list" class="list-group list-group-flush">
                    <!-- Объекты будут загружены через JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Карта (5/7) -->
    <div class="col-12 col-lg-9">
        <div class="card h-100">
            <div class="card-body p-0">
                <div id="map" class="map-container"></div>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно подачи заявки -->
<div class="modal fade" id="applicationModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-file-text"></i> Подача заявки на работу
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="application-form">
                    <input type="hidden" id="object-id" name="object_id">
                    
                    <div class="mb-3">
                        <label class="form-label">Объект</label>
                        <input type="text" class="form-control" id="object-name" readonly>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Условия работы</label>
                        <textarea class="form-control" id="work-conditions" rows="3" readonly></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Задачи на смене</label>
                        <div id="shift-tasks-list"></div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Ваше сообщение работодателю</label>
                        <textarea class="form-control" name="message" rows="4" placeholder="Расскажите о себе, своем опыте и почему вы хотите работать на этом объекте..."></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Предпочитаемый график работы</label>
                        <select class="form-select" name="preferred_schedule">
                            <option value="">Выберите график</option>
                            <option value="full-time">Полный день</option>
                            <option value="part-time">Неполный день</option>
                            <option value="shift">Сменный график</option>
                            <option value="flexible">Гибкий график</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                <button type="button" class="btn btn-primary" id="submit-application">
                    <i class="bi bi-send"></i> Подать заявку
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://api-maps.yandex.ru/2.1/?apikey={{ yandex_maps_api_key }}&lang=ru_RU" type="text/javascript"></script>
<script src="/static/js/employee/objects.js"></script>
{% endblock %}
