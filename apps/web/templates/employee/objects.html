{% extends "employee/base_employee.html" %}

{% block title %}StaffProBot - Поиск работы{% endblock %}

{% block extra_css %}
<style>
.map-container {
    height: 500px;
    width: 100%;
}
.map-popup {
    min-width: 200px;
}
.ymaps-2-1-79-balloon {
    min-width: 200px;
}
</style>
{% endblock %}

{% block content %}
<!-- Карта -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body p-0">
                <div id="map" class="map-container"></div>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно подачи заявки -->
<div class="modal fade" id="applicationModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-file-text"></i> Подача заявки на работу
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="application-form">
                    <input type="hidden" id="object-id" name="object_id">
                    
                    <div class="mb-3">
                        <label class="form-label">Объект</label>
                        <input type="text" class="form-control" id="object-name" readonly>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Условия работы</label>
                        <textarea class="form-control" id="work-conditions" rows="3" readonly></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Задачи на смене</label>
                        <div id="shift-tasks-list"></div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Ваше сообщение работодателю</label>
                        <textarea class="form-control" name="message" rows="4" placeholder="Расскажите о себе, своем опыте и почему вы хотите работать на этом объекте..."></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Предпочитаемый график работы</label>
                        <select class="form-select" name="preferred_schedule">
                            <option value="">Выберите график</option>
                            <option value="full-time">Полный день</option>
                            <option value="part-time">Неполный день</option>
                            <option value="shift">Сменный график</option>
                            <option value="flexible">Гибкий график</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                <button type="button" class="btn btn-primary" id="submit-application">
                    <i class="bi bi-send"></i> Подать заявку
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://api-maps.yandex.ru/2.1/?apikey={{ yandex_maps_api_key }}&lang=ru_RU" type="text/javascript"></script>
<script src="/static/js/employee/objects.js"></script>
{% endblock %}
