{% extends "owner/base_owner.html" %}

{% block title %}{{ title }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', path='css/shared/calendar.css') }}">
<style>
/* Owner-specific calendar styles */
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">


            <!-- Shared Calendar Grid -->
            {% include 'shared/calendar/grid.html' %}
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', path='js/shared/calendar.js') }}"></script>
<script>
// Initialize calendar manager
const calendarManager = new CalendarManager({
    currentDate: new Date('{{ current_date }}'),
    viewType: '{{ view_type }}',
    baseUrl: '{{ request.url.path }}',
    onShiftClick: showShiftDetails,
    onTimeslotClick: showTimeslotDetails,
    onDateClick: showDateDetails
});


function showShiftDetails(shiftId) {
    // Handle planned shifts (schedule_ prefix)
    if (shiftId.toString().startsWith('schedule_')) {
        const scheduleId = shiftId.toString().replace('schedule_', '');
        window.location.href = `/owner/shifts/${scheduleId}?shift_type=schedule`;
    } else {
        // Regular shift
        window.location.href = `/owner/shifts/${shiftId}`;
    }
}

function showTimeslotDetails(timeslotId) {
    // Redirect to timeslot details page
    window.location.href = `/owner/timeslots/${timeslotId}`;
}

function showDateDetails(date) {
    // Show date details modal or redirect
    console.log('Show date details for:', date);
}

</script>
{% endblock %}
