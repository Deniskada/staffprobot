{% extends base_template %}

{% block title %}–°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ - StaffProBot{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="d-flex align-items-center mb-4">
                <a href="/support" class="btn btn-outline-secondary me-3">
                    <i class="bi bi-arrow-left"></i>
                </a>
                <h1 class="mb-0">
                    <i class="bi bi-bug text-danger"></i> –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ
                </h1>
            </div>

            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <p class="text-muted mb-4">
                        –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ. 
                        –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –±—ã—Å—Ç—Ä–µ–µ –µ—ë –∏—Å–ø—Ä–∞–≤–∏—Ç—å.
                    </p>

                    <form method="post" action="/support/api/bug" enctype="multipart/form-data" id="bugForm">
                        <!-- –ß—Ç–æ –¥–µ–ª–∞–ª–∏ -->
                        <div class="mb-4">
                            <label for="what_doing" class="form-label">
                                <strong>–®–∞–≥ 1:</strong> –ß—Ç–æ –≤—ã –¥–µ–ª–∞–ª–∏, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞?
                                <span class="text-danger">*</span>
                            </label>
                            <textarea 
                                class="form-control" 
                                id="what_doing" 
                                name="what_doing" 
                                rows="3" 
                                required
                                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—ã—Ç–∞–ª—Å—è –æ—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É –Ω–∞ –æ–±—ä–µ–∫—Ç–µ '–¢–æ—Ä–≥–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä'"
                            ></textarea>
                            <div class="form-text">
                                –û–ø–∏—à–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–µ–ª–∏ –∫ –æ—à–∏–±–∫–µ
                            </div>
                        </div>

                        <!-- –ß—Ç–æ –æ–∂–∏–¥–∞–ª–∏ -->
                        <div class="mb-4">
                            <label for="expected" class="form-label">
                                <strong>–®–∞–≥ 2:</strong> –ß—Ç–æ –≤—ã –æ–∂–∏–¥–∞–ª–∏ —É–≤–∏–¥–µ—Ç—å?
                                <span class="text-danger">*</span>
                            </label>
                            <textarea 
                                class="form-control" 
                                id="expected" 
                                name="expected" 
                                rows="3" 
                                required
                                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–º–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–µ—Ä"
                            ></textarea>
                            <div class="form-text">
                                –û–ø–∏—à–∏—Ç–µ –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
                            </div>
                        </div>

                        <!-- –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ -->
                        <div class="mb-4">
                            <label for="actual" class="form-label">
                                <strong>–®–∞–≥ 3:</strong> –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ?
                                <span class="text-danger">*</span>
                            </label>
                            <textarea 
                                class="form-control" 
                                id="actual" 
                                name="actual" 
                                rows="3" 
                                required
                                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ—è–≤–∏–ª–æ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ'"
                            ></textarea>
                            <div class="form-text">
                                –û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ
                            </div>
                        </div>

                        <!-- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç -->
                        <div class="mb-4">
                            <label for="priority" class="form-label">
                                <strong>–®–∞–≥ 4:</strong> –ù–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å—Ä–æ—á–Ω–æ?
                            </label>
                            <select class="form-select" id="priority" name="priority">
                                <option value="low">üü¢ –ù–∏–∑–∫–∏–π ‚Äî –º–æ–∂–µ—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å</option>
                                <option value="medium" selected>üü° –°—Ä–µ–¥–Ω–∏–π ‚Äî –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∫–æ—Ä–æ</option>
                                <option value="high">üü† –í—ã—Å–æ–∫–∏–π ‚Äî –º–µ—à–∞–µ—Ç —Ä–∞–±–æ—Ç–µ</option>
                                <option value="critical">üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–π ‚Äî —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ</option>
                            </select>
                            <div class="form-text">
                                –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–ª–∏—è–Ω–∏—è –Ω–∞ –≤–∞—à—É —Ä–∞–±–æ—Ç—É
                            </div>
                        </div>

                        <!-- –°–∫—Ä–∏–Ω—à–æ—Ç -->
                        <div class="mb-4">
                            <label for="screenshot" class="form-label">
                                <strong>–®–∞–≥ 5:</strong> –°–∫—Ä–∏–Ω—à–æ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                            </label>
                            <input 
                                class="form-control" 
                                type="file" 
                                id="screenshot" 
                                name="screenshot"
                                accept="image/*"
                            >
                            <div class="form-text">
                                –°–∫—Ä–∏–Ω—à–æ—Ç –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –±—ã—Å—Ç—Ä–µ–µ –ø–æ–Ω—è—Ç—å –ø—Ä–æ–±–ª–µ–º—É
                            </div>
                            <div id="imagePreview" class="mt-2"></div>
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∏ -->
                        <div class="d-flex justify-content-between align-items-center">
                            <a href="/support" class="btn btn-secondary">
                                <i class="bi bi-x"></i> –û—Ç–º–µ–Ω–∞
                            </a>
                            <button type="submit" class="btn btn-danger" id="submitBtn">
                                <i class="bi bi-send"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã -->
            <div class="card mt-4 bg-light">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="bi bi-lightbulb text-warning"></i> –°–æ–≤–µ—Ç—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞
                    </h5>
                    <ul class="mb-0">
                        <li>–û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã</li>
                        <li>–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</li>
                        <li>–ï—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç</li>
                        <li>–£–∫–∞–∂–∏—Ç–µ, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–∏ —ç—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏–ª–∏ –±—ã–ª–æ –æ–¥–∏–Ω —Ä–∞–∑</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// –ü—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
document.getElementById('screenshot').addEventListener('change', function(e) {
    const file = e.target.files[0];
    const preview = document.getElementById('imagePreview');
    
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.innerHTML = `
                <img src="${e.target.result}" class="img-thumbnail" style="max-width: 300px;">
            `;
        };
        reader.readAsDataURL(file);
    } else {
        preview.innerHTML = '';
    }
});

// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
document.getElementById('bugForm').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('submitBtn');
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>–û—Ç–ø—Ä–∞–≤–∫–∞...';
});
</script>
{% endblock %}

