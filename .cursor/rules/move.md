# –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ –∫–æ–¥–∞ –≤ StaffProBot

## üéØ –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø

**–ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ —Ä–∞–±–æ—á–µ–≥–æ –∫–æ–¥–∞ –∏–∑–º–µ–Ω—è–π –¢–û–õ–¨–ö–û –ø—É—Ç–∏ –∏ –∏–º–ø–æ—Ä—Ç—ã. –ù–ï –¢–†–û–ì–ê–ô –ª–æ–≥–∏–∫—É!**

## üìã –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞

### ‚úÖ –ß–¢–û –ù–£–ñ–ù–û –ú–ï–ù–Ø–¢–¨

1. **–ü—É—Ç–∏ –≤ —Ä–æ—É—Ç–∞—Ö**
   ```python
   # ‚ùå –°—Ç–∞—Ä—ã–π –ø—É—Ç—å
   return templates.TemplateResponse("shifts/list.html", {...})
   
   # ‚úÖ –ù–æ–≤—ã–π –ø—É—Ç—å
   return templates.TemplateResponse("owner/shifts/list.html", {...})
   ```

2. **–ò–º–ø–æ—Ä—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```python
   # ‚ùå –°—Ç–∞—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—ã
   from apps.web.middleware.auth_middleware import require_owner_or_superadmin
   
   # ‚úÖ –ù–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã  
   from apps.web.dependencies import get_current_user_dependency, require_role
   ```

3. **–°—Å—ã–ª–∫–∏ –≤ —à–∞–±–ª–æ–Ω–∞—Ö**
   ```html
   <!-- ‚ùå –°—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏ -->
   <a href="/shifts/{{ shift.id }}">–î–µ—Ç–∞–ª–∏</a>
   
   <!-- ‚úÖ –ù–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏ -->
   <a href="/owner/shifts/{{ shift.id }}">–î–µ—Ç–∞–ª–∏</a>
   ```

4. **–ë–∞–∑–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã**
   ```html
   <!-- ‚ùå –°—Ç–∞—Ä—ã–π –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω -->
   {% extends "base.html" %}
   
   <!-- ‚úÖ –ù–æ–≤—ã–π –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω -->
   {% extends "owner/base_owner.html" %}
   ```

### ‚ùå –ß–¢–û –ù–ï –ù–£–ñ–ù–û –ú–ï–ù–Ø–¢–¨

1. **–°—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö**
   ```python
   # ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
   all_shifts.append({
       'id': shift.id,
       'user': shift.user,           # –û–±—ä–µ–∫—Ç, –Ω–µ —Å—Ç—Ä–æ–∫–∞!
       'object': shift.object,       # –û–±—ä–µ–∫—Ç, –Ω–µ —Å—Ç—Ä–æ–∫–∞!
       'start_time': shift.start_time, # datetime, –Ω–µ —Å—Ç—Ä–æ–∫–∞!
       'status': shift.status
   })
   
   # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –Ω–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤ Python
   all_shifts.append({
       'id': shift.id,
       'user_name': f"{shift.user.first_name} {shift.user.last_name}",
       'object_name': shift.object.name,
       'start_time': shift.start_time.strftime('%Y-%m-%d %H:%M')
   })
   ```

2. **–õ–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏**
   ```python
   # ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∫–æ–ø–∏—Ä—É–µ–º —Ç–æ—á–Ω–æ
   for schedule in schedules:
       all_shifts.append({
           'start_time': schedule.planned_start,  # –ö–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ
           'end_time': schedule.planned_end       # –ö–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ
       })
   ```

3. **–ò–º–µ–Ω–∞ –ø–æ–ª–µ–π –º–æ–¥–µ–ª–∏**
   ```python
   # ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –º–æ–¥–µ–ª–∏
   'start_time': schedule.planned_start,  # –ü–æ–ª–µ –º–æ–¥–µ–ª–∏ ShiftSchedule
   'end_time': schedule.planned_end       # –ü–æ–ª–µ –º–æ–¥–µ–ª–∏ ShiftSchedule
   ```

4. **–ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è**
   ```python
   # ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∫–æ–ø–∏—Ä—É–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º —Ç–æ—á–Ω–æ
   stats = {
       'total': total_shifts,
       'active': len([s for s in all_shifts if s['status'] == 'active']),
       'planned': len([s for s in all_shifts if s['type'] == 'schedule']),  # –ö–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ
       'completed': len([s for s in all_shifts if s['status'] == 'completed'])
   }
   ```

## üîÑ –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞

### –®–∞–≥ 1: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
```bash
cp apps/web/routes/original.py apps/web/routes/owner_original.py
cp -r apps/web/templates/original/* apps/web/templates/owner/original/
```

### –®–∞–≥ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—É—Ç–µ–π –≤ —Ä–æ—É—Ç–∞—Ö
- –ó–∞–º–µ–Ω–∏—Ç—å –ø—É—Ç–∏ –∫ —à–∞–±–ª–æ–Ω–∞–º: `"original/"` ‚Üí `"owner/original/"`
- –ù–ï –ú–ï–ù–Ø–¢–¨ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –≤ —à–∞–±–ª–æ–Ω

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- –ó–∞–º–µ–Ω–∏—Ç—å –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω: `"base.html"` ‚Üí `"owner/base_owner.html"`
- –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏: `/original/` ‚Üí `/owner/original/`
- –ù–ï –ú–ï–ù–Ø–¢–¨ –ª–æ–≥–∏–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —à–∞–±–ª–æ–Ω–∞—Ö

### –®–∞–≥ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–æ—É—Ç
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–æ—É—Ç—ã –≤ `apps/web/routes/owner.py`
- –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –∏ dependencies
- –ù–ï –ú–ï–ù–Ø–¢–¨ –ª–æ–≥–∏–∫—É —Ä–æ—É—Ç–æ–≤

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–ï –ò–°–ü–†–ê–í–õ–Ø–¢–¨ "—Ä–∞–±–æ—Ç–∞—é—â–∏–π" –∫–æ–¥

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

### ‚ùå –û—à–∏–±–∫–∞ 1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
```python
# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Python
'start_time': shift.start_time.strftime('%Y-%m-%d %H:%M')

# –ü–†–ê–í–ò–õ–¨–ù–û - –ø–µ—Ä–µ–¥–∞—á–∞ –æ–±—ä–µ–∫—Ç–∞ –≤ —à–∞–±–ª–æ–Ω
'start_time': shift.start_time
```

### ‚ùå –û—à–∏–±–∫–∞ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω –ø–æ–ª–µ–π
```python
# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä–∏–¥—É–º—ã–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–º–µ–Ω
'user_name': f"{user.first_name} {user.last_name}"

# –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
'user': user
```

### ‚ùå –û—à–∏–±–∫–∞ 3: "–£–ª—É—á—à–µ–Ω–∏–µ" –ª–æ–≥–∏–∫–∏
```python
# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
'planned': len([s for s in all_shifts if s['status'] == 'planned'])

# –ü–†–ê–í–ò–õ–¨–ù–û - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
'planned': len([s for s in all_shifts if s['type'] == 'schedule'])
```

## üí° –ü—Ä–∏–Ω—Ü–∏–ø "–ù–µ —Å–ª–æ–º–∞–π —Ä–∞–±–æ—Ç–∞—é—â–µ–µ"

> **"If it ain't broke, don't fix it"**

- –†–∞–±–æ—á–∏–π –∫–æ–¥ —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- –®–∞–±–ª–æ–Ω—ã –∑–Ω–∞—é—Ç, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ = —Ä–∏—Å–∫ –ø–æ–ª–æ–º–∫–∏

## üéØ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º —Å–ø—Ä–æ—Å–∏ —Å–µ–±—è:

1. **–ò–∑–º–µ–Ω–∏–ª –ª–∏ —è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö?** ‚Üí –ï—Å–ª–∏ –¥–∞, –æ—Ç–∫–∞—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. **–§–æ—Ä–º–∞—Ç–∏—Ä—É—é –ª–∏ —è –¥–∞–Ω–Ω—ã–µ –≤ Python?** ‚Üí –ï—Å–ª–∏ –¥–∞, —É–±–µ—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **–ò—Å–ø–æ–ª—å–∑—É—é –ª–∏ —è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π?** ‚Üí –ï—Å–ª–∏ –Ω–µ—Ç, –∏—Å–ø—Ä–∞–≤—å
4. **–ö–æ–ø–∏—Ä—É—é –ª–∏ —è –ª–æ–≥–∏–∫—É —Ç–æ—á–Ω–æ?** ‚Üí –ï—Å–ª–∏ –Ω–µ—Ç, –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å –æ—Ä–∏–≥–∏–Ω–∞–ª

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](conventions.mdc) - –æ–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –≤–∏–¥–µ–Ω–∏–µ](vision.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [–ü—Ä–∞–≤–∏–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–π](migrations.mdc) - —Ä–∞–±–æ—Ç–∞ —Å –ë–î –∏ Docker

---

**–ü–æ–º–Ω–∏**: –ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –∫–æ–¥–∞ —Ç–≤–æ—è –∑–∞–¥–∞—á–∞ - **–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å**, –∞ –Ω–µ **–ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å**!
