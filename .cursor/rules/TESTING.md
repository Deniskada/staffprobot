# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `.cursorrules`

## üéØ –¶–µ–ª—å

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Cursor AI —Å–ª–µ–¥—É–µ—Ç –Ω–æ–≤—ã–º –ø—Ä–∞–≤–∏–ª–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É–µ—Ç.

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. Project Brain Integration

**–ó–∞–¥–∞–π Cursor:**
> "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç—å user_id –≤ StaffProBot?"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–∑—É –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å** —Å–ø—Ä–æ—Å–∏—Ç—å Project Brain (http://192.168.2.107:8003/chat)
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–æ–≤–µ—Ä–∏—Ç—å** —á–µ—Ä–µ–∑ `grep` –∏–ª–∏ `codebase_search`

---

### 2. –ê–Ω—Ç–∏-–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è

**–ó–∞–¥–∞–π Cursor:**
> "–î–æ–±–∞–≤—å –∏–º–ø–æ—Ä—Ç get_user_id_from_telegram –≤ apps/web/routes/owner/objects.py"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–æ–≤–µ—Ä–∏—Ç—å** —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `grep`
- ‚úÖ –î–æ–ª–∂–µ–Ω **—Å–∫–∞–∑–∞—Ç—å**, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å** –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é (`get_user_id_from_current_user`)

---

### 3. User ID –ø—Ä–∞–≤–∏–ª–∞

**–ó–∞–¥–∞–π Cursor:**
> "–ò—Å–ø—Ä–∞–≤—å —ç—Ç–æ—Ç –∫–æ–¥: `user_id = current_user.get('id')`"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–ª–∂–µ–Ω **—Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å** –æ—à–∏–±–∫—É (—ç—Ç–æ telegram_id, –∞ –Ω–µ user_id!)
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å**:
  ```python
  from shared.services.user_service import get_user_id_from_current_user
  user_id = await get_user_id_from_current_user(current_user, session)
  ```

---

### 4. –î—É–±–ª–∏ —Ä–æ—É—Ç–æ–≤

**–ó–∞–¥–∞–π Cursor:**
> "–î–æ–±–∞–≤—å —Ä–æ—É—Ç @router.get('/') –≤ apps/web/routes/owner/objects.py"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–æ–≤–µ—Ä–∏—Ç—å** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–æ—É—Ç—ã –≤ —Ñ–∞–π–ª–µ
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å** –æ –≤–æ–∑–º–æ–∂–Ω–æ–º –¥—É–±–ª–µ
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å** –¥—Ä—É–≥–æ–π –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/list`)

---

### 5. Jinja2Templates

**–ó–∞–¥–∞–π Cursor:**
> "–°–æ–∑–¥–∞–π –ª–æ–∫–∞–ª—å–Ω—ã–π templates = Jinja2Templates(directory='templates')"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å**:
  ```python
  from apps.web.jinja import templates  # –ï–¥–∏–Ω—ã–π —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä
  ```

---

### 6. Async Session

**–ó–∞–¥–∞–π Cursor:**
> "–î–æ–±–∞–≤—å `async with get_async_session() as session:` –≤ –≤–µ–±-—Ä–æ—É—Ç"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `async with` –≤ —Ä–æ—É—Ç–∞—Ö
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å**:
  ```python
  @router.get("/")
  async def route(session: AsyncSession = Depends(get_db_session)):
      pass
  ```

---

### 7. URLHelper

**–ó–∞–¥–∞–π Cursor:**
> "–°–æ–∑–¥–∞–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ https://staffprobot.ru/owner/objects"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å URL
- ‚úÖ –î–æ–ª–∂–µ–Ω **–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å**:
  ```python
  from core.utils.url_helper import URLHelper
  redirect_url = URLHelper.get_web_url("/owner/objects")
  ```

---

### 8. –¢–∏–ø–∏–∑–∞—Ü–∏—è

**–ó–∞–¥–∞–π Cursor:**
> "–°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é create_user(name, email, role)"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–µ–∑ type hints
- ‚úÖ –î–æ–ª–∂–µ–Ω **—Å–æ–∑–¥–∞—Ç—å**:
  ```python
  async def create_user(
      name: str, 
      email: str, 
      role: UserRole,
      session: AsyncSession
  ) -> User:
      """–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
      pass
  ```

---

## üìä –û—Ü–µ–Ω–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –û—Ç–ª–∏—á–Ω–æ (8/8)
- Cursor —Å–ª–µ–¥—É–µ—Ç **–≤—Å–µ–º** –ø—Ä–∞–≤–∏–ª–∞–º
- –ù–ï –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É–µ—Ç
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç Project Brain –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤

### –•–æ—Ä–æ—à–æ (6-7/8)
- Cursor —Å–ª–µ–¥—É–µ—Ç **–±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É** –ø—Ä–∞–≤–∏–ª
- –ò–Ω–æ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ `grep`
- –ú–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å 1-2 –ø—Ä–∞–≤–∏–ª–∞

### –¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è (4-5/8)
- Cursor —Å–ª–µ–¥—É–µ—Ç **–ø–æ–ª–æ–≤–∏–Ω–µ** –ø—Ä–∞–≤–∏–ª
- –†–µ–¥–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–π–ª—ã
- –ò–Ω–æ–≥–¥–∞ –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É–µ—Ç

### –ü–ª–æ—Ö–æ (<4/8)
- Cursor **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç** –ø—Ä–∞–≤–∏–ª–∞
- –ì–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É–µ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Project Brain

---

## üîß –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Cursor
```bash
# Cursor –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—å .cursorrules –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
```

### 2. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
```bash
ls -la /home/sa/projects/staffprobot/.cursor/rules/.cursorrules
# –î–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –∏ –±—ã—Ç—å –Ω–µ–ø—É—Å—Ç—ã–º
```

### 3. –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–∞–≤–∏–ª
```bash
cat /home/sa/projects/staffprobot/.cursor/rules/.cursorrules | head -50
# –î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "# StaffProBot - –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
```

### 4. –£–±–µ–¥–∏—Å—å, —á—Ç–æ Project Brain —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
curl http://localhost:8003/api/projects
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
```

---

## üìù –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–∞—Ç–∞**: ___________  
**–í–µ—Ä—Å–∏—è Cursor**: ___________

| –¢–µ—Å—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------|-----------|-------------|
| 1. Project Brain | ‚òê Passed ‚òê Failed | |
| 2. –ê–Ω—Ç–∏-–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è | ‚òê Passed ‚òê Failed | |
| 3. User ID –ø—Ä–∞–≤–∏–ª–∞ | ‚òê Passed ‚òê Failed | |
| 4. –î—É–±–ª–∏ —Ä–æ—É—Ç–æ–≤ | ‚òê Passed ‚òê Failed | |
| 5. Jinja2Templates | ‚òê Passed ‚òê Failed | |
| 6. Async Session | ‚òê Passed ‚òê Failed | |
| 7. URLHelper | ‚òê Passed ‚òê Failed | |
| 8. –¢–∏–ø–∏–∑–∞—Ü–∏—è | ‚òê Passed ‚òê Failed | |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞**: _____ / 8

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç** - –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–æ–µ–∫—Ç–æ–º!
2. **–ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã** - –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π `.cursorrules` –∏ –ø–æ–≤—Ç–æ—Ä–∏ —Ç–µ—Å—Ç
3. **–ï—Å–ª–∏ Cursor –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç** - –≤–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å Cursor –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

