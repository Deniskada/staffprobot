# Workflow: Новая задача из roadmap

**Триггер**: Ручной запуск через Supercode UI  
**Режим**: Roadmap Executor  
**Описание**: Автоматизация работы с задачами из roadmap.md

## Шаги workflow

### Шаг 1: Найти текущую задачу
**AI Query:**
```
Прочитай doc/plans/roadmap.md и найди первую невыполненную задачу в текущей итерации. 
Покажи:
- Номер и название задачи
- Описание задачи
- Зависимости (если есть)
- Упомянутые файлы
- Acceptance критерии
```

### Шаг 2: Анализ и предложение решения
**AI Query:**
```
На основе найденной задачи предложи план реализации:
1. Архитектурные решения
2. Структуру файлов и компонентов
3. Примеры кода для ключевых частей
4. Список файлов, которые нужно создать/изменить
5. Команды для тестирования

Учти правила из .cursor/rules/brainrules.mdc и .cursor/rules/conventions.mdc
```

### Шаг 3: Ожидание подтверждения
**User Input**: 
- Пользователь подтверждает или корректирует план
- После подтверждения переходим к реализации

### Шаг 4: Реализация
**AI Query:**
```
Реализуй задачу согласно подтверждённому плану:
1. Создай/измени необходимые файлы
2. Следуй принципам из .cursor/rules/
3. Используй правильные паттерны (user_id, роутинг, шаблоны)
4. Добавь type hints везде
5. Добавь обработку ошибок и логирование
```

### Шаг 5: Проверка качества
**JavaScript:**
```javascript
// Проверка линтера
const lints = await readLints();
if (lints.length > 0) {
    console.log("Найдены ошибки линтера:", lints);
}
```

**AI Query:**
```
Проанализируй результаты read_lints и предложи исправления, если есть ошибки.
Также предложи команды для тестирования:
- Unit тесты (если применимо)
- Integration тесты (если применимо)
- Ручное тестирование через веб-интерфейс или бот
```

### Шаг 6: Обновление roadmap
**AI Query:**
```
Обнови doc/plans/roadmap.md:
1. Отметь задачу как выполненную [x]
2. Обновить прогресс в шапке: пересчитать "Общий прогресс: X/Y (Z%)"
3. Добавить в задачу:
   - Type: (bug/feature/refactor)
   - Files: список изменённых файлов
   - Acceptance: критерии выполнения

Формат:
- [x] **N.M. Название задачи (X дней)**
  - Type: bug | Files: file1.py, file2.py
  - Acceptance: описание критериев
```

### Шаг 7: Подготовка коммита
**AI Query:**
```
Предложи короткое сообщение для коммита на русском языке в формате "Тип: Краткое описание".

Примеры:
- "Исправление: ошибка создания договора с пустым сообщением"
- "Добавление: проверка активных договоров при создании"
- "Обновление: обработка ошибок в роуте сотрудников"
```

## Использование

1. Открыть Supercode UI
2. Выбрать workflow "Новая задача из roadmap"
3. Запустить workflow
4. Следовать инструкциям на каждом шаге
5. Подтверждать действия по запросу

## Результат

- Задача реализована
- Код проверен линтером
- roadmap.md обновлён
- Готово сообщение для коммита
