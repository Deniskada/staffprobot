# –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üéõÔ∏è –û–±–∑–æ—Ä —Ä–∞–∑–¥–µ–ª–∞

–†–∞–∑–¥–µ–ª "–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —É–ø—Ä–∞–≤–ª—è—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã, –≤–∫–ª—é—á–∞—è –¥–æ–º–µ–Ω, SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Nginx –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.

## üìç –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º

1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∫–∞–∫ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –º–µ–Ω—é "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ" ‚Üí "–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
3. URL: `http://yourdomain.com/admin/system-settings`

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –î–æ–º–µ–Ω –∏ URL
- **–î–æ–º–µ–Ω —Å–∏—Å—Ç–µ–º—ã** - –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS** - –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ SSL
- **Email –¥–ª—è SSL** - email –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –ü—É—Ç–∏ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º
- **–ü—É—Ç—å –∫ Nginx** - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π Nginx (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/etc/nginx/sites-available`)
- **–ü—É—Ç—å –∫ Certbot** - –ø—É—Ç—å –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º—É —Ñ–∞–π–ª—É certbot (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/usr/bin/certbot`)

## üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SSL

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ DNS** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞** - —É–∫–∞–∂–∏—Ç–µ –¥–æ–º–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** - –Ω–∞–∂–º–∏—Ç–µ "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL"
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ 30 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è

## üß∞ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

### –†–µ–∂–∏–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (dev/prod)
- –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx¬ª –¥–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ¬´–†–µ–∂–∏–º: production (SSH)¬ª –∏ –ø–æ–ª—è SSH (host, user, key path).
- Dev (–ª–æ–∫–∞–ª—å–Ω–æ): –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ web –±–µ–∑ sudo; –∫–æ–Ω—Ñ–∏–≥–∏ –∏ backup‚Äô—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –ø–æ –ø—É—Ç–∏ `deployment/nginx/dev_out`.
- Prod (–ø–æ SSH): –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ SSH —Å sudo, –∫–æ–Ω—Ñ–∏–≥–∏ –≤ `/etc/nginx/sites-available`, —Å—Å—ã–ª–∫–∏ –≤ `/etc/nginx/sites-enabled`.

### –ö–Ω–æ–ø–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ —à–∞–±–ª–æ–Ω–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ —Å–∫—Ä–æ–ª–ª–æ–º; ¬´–°–∫—Ä—ã—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä¬ª ‚Äî —Å–∫—Ä—ã–≤–∞–µ—Ç –±–ª–æ–∫.
- –ñ–∏–≤–æ–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (host): —á–∏—Ç–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–Ω—Ñ–∏–≥ –Ω–∞ —Ö–æ—Å—Ç–µ (prod) –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—á–µ—Ä–∫ –Ω–∞ dev –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥ (dev ‚Üí `deployment/nginx/dev_out`, prod ‚Üí `/etc/nginx/sites-available`).
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
  - Dev: –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ `/tmp` –∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç `nginx -t` (nginx –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å) ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞–ª–∏–¥–Ω–æ –≤ dev-—Ä–µ–∂–∏–º–µ.
  - Prod: –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ —Ö–æ—Å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç `sudo nginx -t -c ‚Ä¶`.
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (prod): backup ‚Üí symlink ‚Üí `nginx -t` ‚Üí `systemctl reload nginx`.
- Backup‚Äô—ã:
  - Dev: `deployment/nginx/dev_out/backups` ‚Äî —Å–ø–∏—Å–æ–∫/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ñ–∞–π–ª–∞–º–∏ –≤ —ç—Ç–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ.
  - Prod: `/etc/nginx/sites-available/backups` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ SSH.

### –®–∞–±–ª–æ–Ω Nginx
- –§–∞–π–ª: `deployment/nginx/staffprobot.template.conf`.
- –û–±–Ω–æ–≤–ª—ë–Ω CSP (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ Yandex Maps: `api-maps.yandex.ru`, `yastatic.net`, `*.yandex.{net,ru}`, –ø–ª—é—Å CDN).
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `{{DOMAIN}}`, `{{GENERATED_AT}}`.

### API (–∞–¥–º–∏–Ω)
- `GET/POST /api/system-settings/nginx/exec-settings` ‚Äî –ø–æ–ª—É—á–∏—Ç—å/—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∂–∏–º –∏ SSH.
- `GET /api/system-settings/nginx/preview/live?domain=‚Ä¶` ‚Äî –∂–∏–≤–æ–π –∫–æ–Ω—Ñ–∏–≥.
- `GET /api/system-settings/nginx/preview?domain=‚Ä¶&use_https=bool` ‚Äî –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞.
- `POST /api/system-settings/nginx/generate {domain,use_https}` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è.
- `POST /api/system-settings/nginx/validate {domain,use_https}` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è.
- `POST /api/system-settings/nginx/apply {domain}` ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å.
- `GET /api/system-settings/nginx/backups?domain=‚Ä¶` ‚Äî —Å–ø–∏—Å–æ–∫ backup‚Äô–æ–≤.
- `POST /api/system-settings/nginx/backups/create {domain}` ‚Äî —Å–æ–∑–¥–∞—Ç—å backup.
- `POST /api/system-settings/nginx/backups/restore?domain=‚Ä¶&backup_filename=‚Ä¶` ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.
- `DELETE /api/system-settings/nginx/backups/delete?domain=‚Ä¶&backup_filename=‚Ä¶` ‚Äî —É–¥–∞–ª–∏—Ç—å.

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π
- Dev: –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å ‚Üí (–æ–ø—Ü.) Backup ‚Üí –ü—Ä–∏–º–µ–Ω–∏—Ç—å ‚Üí –°—Ç–∞—Ç—É—Å.
- Prod: –í–∫–ª—é—á–∏—Ç—å SSH —Ä–µ–∂–∏–º ‚Üí –ñ–∏–≤–æ–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä ‚Üí –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (—à–∞–±–ª–æ–Ω) ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å ‚Üí Backup ‚Üí –ü—Ä–∏–º–µ–Ω–∏—Ç—å ‚Üí –°—Ç–∞—Ç—É—Å.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π email

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SSL
- **–°—Ç–∞—Ç—É—Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- **–ê–ª–µ—Ä—Ç—ã** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å SSL
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - —Å–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üåê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Nginx

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
1. **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏
- **–û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω** - `yourdomain.com`
- **API** - `api.yourdomain.com`
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** - `admin.yourdomain.com`
- **–ë–æ—Ç** - `bot.yourdomain.com`

### Backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- **–°–æ–∑–¥–∞–Ω–∏–µ backup** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - –æ—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–£–¥–∞–ª–µ–Ω–∏–µ** - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö backup'–æ–≤

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### SSL –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** - —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–ó–¥–æ—Ä–æ–≤—å–µ SSL** - –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ SSL –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞–ª–∏–¥–Ω—ã—Ö/–∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SSL –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –ø–æ–∏—Å–∫ –ø–æ —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏, —Å—Ç–∞—Ç—É—Å—É, –¥–∞—Ç–µ
- **–≠–∫—Å–ø–æ—Ä—Ç** - –≤—ã–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤ –≤ JSON/CSV —Ñ–æ—Ä–º–∞—Ç–µ
- **–û—á–∏—Å—Ç–∫–∞** - —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π

### –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ** - –æ—à–∏–±–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è** - –ø—Ä–∏–±–ª–∏–∂–∞—é—â–µ–µ—Å—è –∏—Å—Ç–µ—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ** - —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DOMAIN=yourdomain.com
SSL_EMAIL=admin@yourdomain.com
USE_HTTPS=true

# –ü—É—Ç–∏ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º
NGINX_CONFIG_PATH=/etc/nginx/sites-available
CERTBOT_PATH=/usr/bin/certbot

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SSL_ENABLED=true
AUTO_RENEWAL=true
```

### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSL
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é
sudo certbot certonly --standalone -d yourdomain.com -d api.yourdomain.com -d admin.yourdomain.com -d bot.yourdomain.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot certificates

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot renew
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –≤—Ä—É—á–Ω—É—é
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nano /etc/nginx/sites-available/staffprobot.conf

# –í–∫–ª—é—á–µ–Ω–∏–µ —Å–∞–π—Ç–∞
sudo ln -s /etc/nginx/sites-available/staffprobot.conf /etc/nginx/sites-enabled/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx
sudo systemctl reload nginx
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ certbot: `sudo certbot logs`

### –ü—Ä–æ–±–ª–µ–º–∞: Nginx –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `sudo nginx -t`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –ü—Ä–æ–±–ª–µ–º–∞: –î–æ–º–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Nginx –∑–∞–ø—É—â–µ–Ω: `sudo systemctl status nginx`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª: `sudo ufw status`

## üìã –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π SSL
- [ ] –î–æ–º–µ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] DNS –∑–∞–ø–∏—Å–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –ü–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã
- [ ] Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω

### –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL
- [ ] –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- [ ] HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SSL –∞–∫—Ç–∏–≤–µ–Ω

### –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backup'–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- [ ] –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (–µ–∂–µ–º–µ—Å—è—á–Ω–æ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)

---

**–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã**:
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](installation.md)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏](monitoring.md)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](security.md)
